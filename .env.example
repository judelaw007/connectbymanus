# MojiTax Connect - Environment Variables
# Copy this file to .env and fill in your values

# ============================================
# SUPABASE (Database & Auth)
# ============================================
# Get these from: Supabase Dashboard → Settings → API
# Project URL
VITE_SUPABASE_URL=https://[PROJECT-REF].supabase.co

# Anonymous key (client-side, for admin authentication)
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Service role key (server-side, bypasses RLS)
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# ============================================
# LEARNWORLDS AUTH (Member Login)
# ============================================
# Get these from: mojitax.co.uk Learnworlds dashboard
LEARNWORLDS_CLIENT_ID=your_client_id
LEARNWORLDS_CLIENT_SECRET=your_client_secret
# School identity — set ONE of these (code checks all three in priority order):
#   LEARNWORLDS_API_URL=https://mojitax.learnworlds.com/admin/api/v2  (full API base)
#   LEARNWORLDS_SCHOOL_URL=https://mojitax.learnworlds.com            (school URL)
#   LEARNWORLDS_SCHOOL_ID=mojitax                                     (just the subdomain)
LEARNWORLDS_SCHOOL_ID=your_school_id

# ============================================
# EMAIL (SendGrid)
# ============================================
# Get API key from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.xxx
EMAIL_FROM=no-reply@mojitax.com

# ============================================
# TEST MODE (Safe Testing)
# ============================================
# When TEST_MODE=true:
# - All emails redirect to TEST_EMAIL_RECIPIENT
# - Email subjects prefixed with [TEST]
# - Safe to test without spamming real users
#
# Set TEST_MODE=false for production!
TEST_MODE=true
TEST_EMAIL_RECIPIENT=admin@mojitax.co.uk

# ============================================
# SESSION / AUTH
# ============================================
JWT_SECRET=your-jwt-secret-at-least-32-characters-long
SESSION_SECRET=your-session-secret

# ============================================
# ADMIN LOGIN
# ============================================
# Password for admin login (used by auth.adminLogin)
ADMIN_PASSWORD=your-admin-password

# ============================================
# LLM (@moji chatbot)
# ============================================
OPENAI_API_KEY=sk-...

# ============================================
# MISC
# ============================================
# Owner open_id for automatic admin role assignment
OWNER_OPEN_ID=admin-mojitax

# Application environment
NODE_ENV=development
PORT=5000
